parameters:

services:
    rbs_erp.sales.configure_menu_listener:
        class: Rbs\Bundle\SalesBundle\EventListener\ConfigureMenuListener
        arguments: [@service_container]
        tags:
          - { name: kernel.event_listener, event: core_bundle.menu_user, method: onMenuConfigureMain, priority: 999 }

    rbs_erp.sales.datatable.customer:
        class: Rbs\Bundle\SalesBundle\Datatables\CustomerDatatable
        tags:
            - { name: sg.datatable.view }

    rbs_erp.sales.datatable.stock:
        class: Rbs\Bundle\SalesBundle\Datatables\StockDatatable
        tags:
            - { name: sg.datatable.view }

    rbs_erp.sales.datatable.order:
        class: Rbs\Bundle\SalesBundle\Datatables\OrderDatatable
        tags:
            - { name: sg.datatable.view }

    rbs_erp.sales.datatable.stock.history:
        class: Rbs\Bundle\SalesBundle\Datatables\StockHistoryDatatable
        tags:
            - { name: sg.datatable.view }
        arguments: [@security.context, @security.token_storage, @twig, @translator.data_collector, @router, @doctrine.orm.entity_manager, @service_container]

    rbs_erp.sales.datatable.customer.group:
        class: Rbs\Bundle\SalesBundle\Datatables\CustomerGroupDatatable
        tags:
            - { name: sg.datatable.view }

    rbs_erp.sales.registration.form.type:
        class: Rbs\Bundle\SalesBundle\Form\Type\CustomerForm
        tags:
            - { name: form.type, alias: rbs_user_bundle_user }
        arguments: ['%fos_user.model.user.class%']

    rbs_erp.sales.stock_create.listener:
        class: Rbs\Bundle\SalesBundle\EventListener\StockCreateListener
        tags:
            - { name: kernel.event_listener, event: core.item.created, method: onCreated }
        arguments: [@doctrine.orm.entity_manager]
