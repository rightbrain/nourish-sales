<table width="100%" style="margin-bottom: 20px; font-weight: bold">
    <tr style="font-size: large">
        <td width="80%">Date wise Oder Quantity & Value</td>
        <td width="20%" align="right">{{ data?data['start_date']:'' }}</td>
    </tr>
</table>
<table class="table table-bordered">
    <thead>
    <tr>
        <th>Order Id</th>
        <th>Agent ID</th>
        <th>Agent Name</th>
        <th>Agent District</th>
        <th>Feed Mill/Depot</th>
        <th width="110px">Date</th>
        <th>Delivery Status</th>
        <th>Total Quantity</th>
        <th>Trade Value</th>
        <th>Payment</th>
        <th>Remarks</th>
    </tr>
    </thead>
    {% if orders %}
        <tbody>
        {% set sl = 1 %}
        {% set grandTotalQty = 0 %}
        {% set grandTotalAmount = 0 %}
        {% set grandTotalPaymentAmount = 0 %}
        {% set depotAndCategoryTotal = [] %}
        {% for depot in depots %}
            {% if orders[depot.id] is defined %}
                <tr>
                    <td style="font-weight: bold;text-align: center" colspan="12">{{ depot.name }}</td>
                </tr>
                {% set depotTotalQty = 0 %}
                {% set depotTotalAmount = 0 %}
                {% set depotTotalPaymentAmount = 0 %}
                {% for order in orders[depot.id] %}
                    {% set depotTotalQty = depotTotalQty+order.totalQuantity %}
                    {% set depotTotalAmount = depotTotalAmount + order.totalAmount %}
                    {% set depotTotalPaymentAmount = depotTotalPaymentAmount + paymentAmountViaOrders[order.id].totalAmount|default(0) %}
                    <tr>
                        <td>{{ order.id }}</td>
                        <td>{{ order.agentId|default('') }}</td>
                        <td>{{ order.fullName|default('') }}</td>
                        <td>{{ order.zillaName|default('') }}</td>
                        <td>{{ depot.name }}</td>
                        <td>{{ order.createdAt|date('d-m-Y') }}</td>
                        <td>{{ order.deliveryState}}</td>
                        <td>{{ order.totalQuantity|number_format(2,'.',',')}}</td>
                        <td>{{ order.totalAmount|number_format(2,'.',',')}}</td>
                        <td>{{ paymentAmountViaOrders[order.id].totalAmount|default('')|number_format(2,'.',',') }}</td>
                        <td style="word-break: break-word!important;">{{ order.remarks|default('') }}</td>
                    </tr>
                {% endfor %}
                <tr>
                    <th class="text-right" colspan="7">Total</th>
                    <th>{{ depotTotalQty|number_format(2,'.',',') }}</th>
                    <th>{{ depotTotalAmount|number_format(2,'.',',') }}</th>
                    <th>{{ depotTotalPaymentAmount|number_format(2,'.',',') }}</th>
                    <td></td>
                </tr>
            {% endif %}
            {% set sl = sl + 1 %}
        {% endfor %}

        </tbody>
    {% endif %}
</table>